---
import { getCollection } from 'astro:content';
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import Header from '../../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';

const posts = (await getCollection('writeups')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---
<!doctype html>
<html lang="en">
<head><BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} /></head>
<body>
<Header />
<main>
	<h1>WriteUps</h1>
	<ul>
		{posts.map((post) => (
			<li>
				<a href={`/writeups/${post.id}/`}>{post.data.title}</a>
				<p>{post.data.description}</p>
			</li>
		))}
	</ul>
</main>
<Footer />
</body>
</html>
